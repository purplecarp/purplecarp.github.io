<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="utf-8">
    <title>æ°´æ³¢å¹²æ¶‰æ¨¡æ“¬ - ç‰©ç†æ¨¡æ“¬</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="../../images/fish.png" rel="shortcut icon">
    
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/normalize.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
    <link href="../../css/responsive.css" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 25px;
            font-size: 14px;
        }
        
        .canvas-wrapper {
            display: flex;
            justify-content: center;
            margin: 25px 0;
            background: #000;
            border-radius: 10px;
            padding: 15px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
        }
        
        #waveCanvas {
            border: 3px solid #667eea;
            border-radius: 5px;
            display: block;
        }
        
        .controls {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .control-section {
            margin-bottom: 25px;
        }
        
        .control-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }
        
        .control-row {
            display: flex;
            align-items: center;
            margin: 20px 0;
            gap: 15px;
            padding: 5px 0;
        }
        
        .control-row label {
            min-width: 150px;
            font-weight: 600;
            color: #555;
        }
        
        .control-row input[type="range"] {
            flex: 1;
            height: 12px;
            border-radius: 6px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }
        
        .control-row input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
            border: 3px solid white;
        }
        
        .control-row input[type="range"]::-moz-range-thumb {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
        }
        
        .value-display {
            min-width: 100px;
            text-align: right;
            font-weight: bold;
            color: #667eea;
            font-size: 16px;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 25px 0;
        }
        
        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            min-height: 50px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-start {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-pause {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .btn-reset {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .btn-back {
            background: #6c757d;
            color: white;
        }
        
        .preset-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn-preset {
            padding: 12px 25px;
            border: 2px solid #667eea;
            border-radius: 10px;
            background: white;
            color: #667eea;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 48px;
        }
        
        .btn-preset:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }
        
        .btn-preset.active {
            background: #667eea;
            color: white;
        }
        
        .info-box {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }
        
        .info-box h4 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .info-box p {
            color: #555;
            margin: 8px 0;
            line-height: 1.6;
        }
        
        .info-box .formula {
            background: white;
            padding: 12px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            color: #333;
            font-weight: 600;
        }
        
        .wave-info {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.5);
            border-radius: 8px;
        }
        
        .wave-info-item {
            text-align: center;
        }
        
        .wave-info-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .wave-info-value {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }
        
        /* æ‰‹æ©ŸéŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .subtitle {
                font-size: 12px;
            }
            
            #waveCanvas {
                max-width: 100%;
                height: auto;
            }
            
            .control-row {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
                margin: 25px 0;
            }
            
            .control-row label {
                min-width: auto;
                font-size: 16px;
            }
            
            .value-display {
                text-align: center;
                font-size: 18px;
                padding: 8px;
                background: rgba(102, 126, 234, 0.1);
                border-radius: 5px;
            }
            
            .button-group {
                gap: 10px;
            }
            
            .btn {
                width: 100%;
                max-width: 150px;
            }
            
            .wave-info {
                flex-direction: column;
                gap: 15px;
            }
            
            .wave-info-item {
                padding: 10px;
                background: white;
                border-radius: 8px;
            }
            
            .info-box {
                padding: 15px;
            }
            
            .info-box h4 {
                font-size: 16px;
            }
            
            .info-box p {
                font-size: 14px;
            }
            
            .formula {
                font-size: 12px;
                padding: 8px;
                overflow-x: auto;
            }
        }
        
        /* å¢åŠ è§¸æ§åé¥‹ */
        .control-row input[type="range"]:active::-webkit-slider-thumb {
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.5);
        }
        
        .control-row input[type="range"]:active::-moz-range-thumb {
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŠ æ°´æ³¢å¹²æ¶‰æ¨¡æ“¬</h1>
        <p class="subtitle">ä½¿ç”¨è§£æå¼æ³¢å‹•æ–¹ç¨‹æ¨¡æ“¬æ³¢çš„ç–ŠåŠ èˆ‡å¹²æ¶‰ç¾è±¡</p>
        
        <div class="info-box">
            <h4>ğŸ“š ç‰©ç†åŸç†</h4>
            <p><strong>æ³¢å‹•æ–¹ç¨‹ï¼ˆæ¯å€‹æ³¢æºï¼‰ï¼š</strong></p>
            <div class="formula">h(x,y,t) = A Â· sin(2Ï€/Î» Â· r - 2Ï€Â·fÂ·t + Ï†)</div>
            <p><strong>ç¸½æŒ¯å¹…ï¼ˆå¤šæ³¢æºç–ŠåŠ ï¼‰ï¼š</strong></p>
            <div class="formula">H(x,y,t) = Î£ h<sub>i</sub>(x,y,t)</div>
            <p>
                â€¢ <strong>å»ºè¨­æ€§å¹²æ¶‰ï¼š</strong>å…©æ³¢åŒç›¸ä½ç–ŠåŠ ï¼ŒæŒ¯å¹…å¢å¼·ï¼ˆæ˜äº®å€åŸŸï¼‰<br>
                â€¢ <strong>ç ´å£æ€§å¹²æ¶‰ï¼š</strong>å…©æ³¢åç›¸ä½ç–ŠåŠ ï¼ŒæŒ¯å¹…ç›¸æ¶ˆï¼ˆæš—æ·¡å€åŸŸï¼‰<br>
                â€¢ <strong>å¹²æ¶‰æ¢ç´‹ï¼š</strong>ç”±è·¯å¾‘å·®ç”¢ç”Ÿçš„ç©©å®šäº®æš—æ¢ç´‹åœ–æ¡ˆ<br>
                â€¢ <strong>æ³¢é€Ÿé—œä¿‚ï¼š</strong>v = fÂ·Î»ï¼ˆæ³¢é€Ÿ = é »ç‡ Ã— æ³¢é•·ï¼‰
            </p>
        </div>
        
        <div class="canvas-wrapper">
            <canvas id="waveCanvas" width="900" height="600"></canvas>
        </div>
        
        <div class="button-group">
            <button class="btn btn-start" id="startBtn">â–¶ é–‹å§‹</button>
            <button class="btn btn-pause" id="pauseBtn">â¸ æš«åœ</button>
            <button class="btn btn-reset" id="resetBtn">ğŸ”„ é‡ç½®</button>
            <button class="btn btn-back" onclick="window.location.href='../../physics-simulations.html'">â† è¿”å›</button>
        </div>
        
        <div class="controls">
            <div class="control-section">
                <h3>ğŸ¯ æ³¢æºé…ç½®</h3>
                
                <div class="control-row">
                    <label>æ³¢æºé–“è· (d)</label>
                    <input type="range" id="spacingSlider" min="20" max="600" step="10" value="150">
                    <span class="value-display" id="spacingValue">150 px</span>
                </div>
                <div class="wave-info">
                    <div class="wave-info-item">
                        <div class="wave-info-label">æ³¢æº 1 ä½ç½®</div>
                        <div class="wave-info-value" id="source1Pos">-</div>
                    </div>
                    <div class="wave-info-item">
                        <div class="wave-info-label">æ³¢æº 2 ä½ç½®</div>
                        <div class="wave-info-value" id="source2Pos">-</div>
                    </div>
                    <div class="wave-info-item">
                        <div class="wave-info-label">æ³¢æºé–“è·</div>
                        <div class="wave-info-value" id="sourceDist">-</div>
                    </div>
                </div>
            </div>
            
            <div class="control-section">
                <h3>âš™ï¸ æ³¢å‹•åƒæ•¸</h3>
                
                <div class="control-row">
                    <label>æ³¢é•· (Î»)</label>
                    <input type="range" id="wavelengthSlider" min="10" max="100" step="5" value="30">
                    <span class="value-display" id="wavelengthValue">30 px</span>
                </div>
                
                <div class="control-row">
                    <label>å‹•ç•«é€Ÿåº¦</label>
                    <input type="range" id="speedSlider" min="0.2" max="3" step="0.2" value="1">
                    <span class="value-display" id="speedValue">1.0x</span>
                </div>
                
                <div class="wave-info" style="margin-top: 20px;">
                    <div class="wave-info-item">
                        <div class="wave-info-label">æ³¢é•· (Î»)</div>
                        <div class="wave-info-value" id="currentWavelength">30 px</div>
                    </div>
                    <div class="wave-info-item">
                        <div class="wave-info-label">æ³¢æºé–“è· (d)</div>
                        <div class="wave-info-value" id="currentSpacing">150 px</div>
                    </div>
                    <div class="wave-info-item">
                        <div class="wave-info-label">d/Î» æ¯”å€¼</div>
                        <div class="wave-info-value" id="spacingRatio">5.0</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-box" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);">
            <h4>ğŸ’¡ ä½¿ç”¨èªªæ˜</h4>
            <p>
                â€¢ <strong>æ³¢æºä½ç½®ï¼š</strong>å…©å€‹æ³¢æºä½æ–¼ç•«å¸ƒåº•éƒ¨ï¼Œå‘ä¸Šå‚³æ’­ç”¢ç”Ÿå¹²æ¶‰åœ–æ¡ˆ<br>
                â€¢ <strong>èª¿æ•´æ³¢é•·ï¼š</strong>æ³¢é•·è¶Šé•·ï¼Œå¹²æ¶‰æ¢ç´‹è¶Šå¯¬ï¼Œæ³¢çš„å‚³æ’­è·é›¢è¶Šé <br>
                â€¢ <strong>èª¿æ•´é–“è·ï¼š</strong>é–“è·è¶Šå¤§ï¼Œå¹²æ¶‰æ¢ç´‹è¶Šå¯†é›†ï¼›d/Î» æ¯”å€¼æ±ºå®šæ¢ç´‹æ•¸é‡<br>
                â€¢ <strong>è§€å¯Ÿå¹²æ¶‰ï¼š</strong>æ˜äº®å€åŸŸè¡¨ç¤ºå»ºè¨­æ€§å¹²æ¶‰ï¼Œæš—æ·¡å€åŸŸè¡¨ç¤ºç ´å£æ€§å¹²æ¶‰<br>
                â€¢ <strong>é¡è‰²å«ç¾©ï¼š</strong>
                <span style="color: #ff4444; font-weight: bold;">ç´…é»ƒè‰²</span> = æ­£æŒ¯å¹…ï¼ˆæ³¢å³°ï¼‰ï¼Œ
                <span style="color: #4444ff; font-weight: bold;">è—è‰²</span> = è² æŒ¯å¹…ï¼ˆæ³¢è°·ï¼‰ï¼Œ
                <span style="color: #000; font-weight: bold;">é»‘è‰²</span> = é›¶æŒ¯å¹…
            </p>
        </div>
    </div>
    
    <script>
        class WaveInterferenceSimulation {
            constructor() {
                this.canvas = document.getElementById('waveCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.width = this.canvas.width;
                this.height = this.canvas.height;
                
                // ç‰©ç†åƒæ•¸
                this.wavelength = 30;    // æ³¢é•·ï¼ˆåƒç´ ï¼‰
                this.frequency = 1.5;    // é »ç‡ï¼ˆHzï¼‰- å›ºå®šå€¼
                this.amplitude = 50;     // æŒ¯å¹… - å›ºå®šå€¼
                this.speed = 1.0;        // å‹•ç•«é€Ÿåº¦å€ç‡
                this.spacingDistance = 150; // æ³¢æºé–“è·ï¼ˆåƒç´ ï¼‰
                
                // æ³¢æºé…ç½®
                this.sources = [];
                
                // æ™‚é–“
                this.time = 0;
                this.isRunning = false;
                this.animationId = null;
                
                // åƒç´ ç·©è¡
                this.imageData = this.ctx.createImageData(this.width, this.height);
                
                // æ³¢å‰è¿½è¹¤ï¼ˆç”¨æ–¼é¡¯ç¤ºæ³¢çš„æ“´æ•£ç¯„åœï¼‰
                this.showWavefront = true;
                
                this.init();
            }
            
            init() {
                this.setupSources();
                this.setupControls();
                this.updateInfo();
                this.drawStatic();
            }
            
            setupSources() {
                const centerX = this.width / 2;
                const bottomY = this.height - 50;  // è·é›¢åº•éƒ¨ 50 åƒç´ 
                const halfDist = this.spacingDistance / 2;
                
                this.sources = [
                    { x: centerX - halfDist, y: bottomY, phase: 0 },
                    { x: centerX + halfDist, y: bottomY, phase: 0 }
                ];
                
                this.updateSourceInfo();
            }
            
            setupControls() {
                // æ³¢æºé–“è·æ»‘æ¡¿
                document.getElementById('spacingSlider').addEventListener('input', (e) => {
                    this.spacingDistance = parseFloat(e.target.value);
                    document.getElementById('spacingValue').textContent = this.spacingDistance + ' px';
                    this.setupSources();
                    this.updateInfo();
                    if (!this.isRunning) {
                        this.drawStatic();
                    }
                });
                
                // æ³¢é•·æ§åˆ¶
                document.getElementById('wavelengthSlider').addEventListener('input', (e) => {
                    this.wavelength = parseFloat(e.target.value);
                    document.getElementById('wavelengthValue').textContent = this.wavelength + ' px';
                    this.updateInfo();
                });
                
                // é€Ÿåº¦æ§åˆ¶
                document.getElementById('speedSlider').addEventListener('input', (e) => {
                    this.speed = parseFloat(e.target.value);
                    document.getElementById('speedValue').textContent = this.speed.toFixed(1) + 'x';
                });
                
                // æŒ‰éˆ•æ§åˆ¶
                document.getElementById('startBtn').addEventListener('click', () => this.start());
                document.getElementById('pauseBtn').addEventListener('click', () => this.pause());
                document.getElementById('resetBtn').addEventListener('click', () => this.reset());
            }
            
            updateSourceInfo() {
                const s1 = this.sources[0];
                const s2 = this.sources[1];
                const dist = Math.sqrt((s2.x - s1.x) ** 2 + (s2.y - s1.y) ** 2);
                
                document.getElementById('source1Pos').textContent = `(${s1.x}, ${s1.y})`;
                document.getElementById('source2Pos').textContent = `(${s2.x}, ${s2.y})`;
                document.getElementById('sourceDist').textContent = dist.toFixed(0) + ' px';
            }
            
            updateInfo() {
                document.getElementById('currentWavelength').textContent = this.wavelength.toFixed(0) + ' px';
                document.getElementById('currentSpacing').textContent = this.spacingDistance.toFixed(0) + ' px';
                
                const ratio = this.spacingDistance / this.wavelength;
                document.getElementById('spacingRatio').textContent = ratio.toFixed(1);
            }
            
            start() {
                this.isRunning = true;
                this.animate();
            }
            
            pause() {
                this.isRunning = false;
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                    this.animationId = null;
                }
            }
            
            reset() {
                this.pause();
                this.time = 0;
                this.drawStatic();
            }
            
            animate() {
                if (!this.isRunning) return;
                
                // æ›´æ–°æ™‚é–“ï¼ˆè€ƒæ…®é€Ÿåº¦å€ç‡ï¼‰
                this.time += 0.016 * this.speed;  // å‡è¨­ 60 FPS
                
                this.render();
                this.animationId = requestAnimationFrame(() => this.animate());
            }
            
            calculateWaveHeight(x, y) {
                let totalHeight = 0;
                const omega = 2 * Math.PI * this.frequency;
                const k = 2 * Math.PI / this.wavelength;
                
                // è¨ˆç®—æ³¢é€Ÿï¼ˆv = fÂ·Î»ï¼‰
                const waveSpeed = this.frequency * this.wavelength;
                
                // ç–ŠåŠ æ‰€æœ‰æ³¢æºçš„è²¢ç»
                for (const source of this.sources) {
                    const dx = x - source.x;
                    const dy = y - source.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    // æ³¢å‰æ“´æ•£æª¢æŸ¥ï¼ˆæ³¢åªåœ¨å·²åˆ°é”çš„å€åŸŸé¡¯ç¤ºï¼‰
                    const wavefrontDistance = waveSpeed * this.time;
                    if (this.showWavefront && distance > wavefrontDistance) {
                        continue;  // æ³¢å°šæœªåˆ°é”æ­¤ä½ç½®
                    }
                    
                    // æ³¢å‹•æ–¹ç¨‹ï¼šh = A Â· sin(kÂ·r - Ï‰Â·t + Ï†)
                    // k = 2Ï€/Î», Ï‰ = 2Ï€f
                    const phase = k * distance - omega * this.time + source.phase;
                    const height = this.amplitude * Math.sin(phase);
                    
                    // è€ƒæ…®è·é›¢è¡°æ¸›ï¼ˆå¯é¸ï¼Œè®“é è™•çš„æ³¢è®Šå¼±ï¼‰
                    const attenuation = 1.0 / (1.0 + distance / 1000);
                    
                    totalHeight += height * attenuation;
                }
                
                return totalHeight;
            }
            
            render() {
                const data = this.imageData.data;
                const maxDisplay = this.amplitude * this.sources.length * 0.8;
                
                // è¨ˆç®—æ¯å€‹åƒç´ çš„æ³¢é«˜
                for (let y = 0; y < this.height; y++) {
                    for (let x = 0; x < this.width; x++) {
                        const height = this.calculateWaveHeight(x, y);
                        const normalized = Math.max(-1, Math.min(1, height / maxDisplay));
                        
                        const idx = (y * this.width + x) * 4;
                        
                        // æ”¹é€²çš„é¡è‰²æ˜ å°„
                        let r, g, b;
                        
                        if (normalized > 0) {
                            // æ­£æŒ¯å¹…ï¼šé»‘ -> ç´… -> é»ƒ -> ç™½
                            const intensity = normalized;
                            if (intensity < 0.5) {
                                // é»‘ -> ç´…
                                r = Math.floor(255 * intensity * 2);
                                g = 0;
                                b = 0;
                            } else {
                                // ç´… -> é»ƒ
                                r = 255;
                                g = Math.floor(255 * (intensity - 0.5) * 2);
                                b = 0;
                            }
                        } else {
                            // è² æŒ¯å¹…ï¼šé»‘ -> è— -> é’
                            const intensity = -normalized;
                            if (intensity < 0.5) {
                                // é»‘ -> è—
                                r = 0;
                                g = 0;
                                b = Math.floor(255 * intensity * 2);
                            } else {
                                // è— -> é’
                                r = 0;
                                g = Math.floor(255 * (intensity - 0.5) * 2);
                                b = 255;
                            }
                        }
                        
                        data[idx] = r;
                        data[idx + 1] = g;
                        data[idx + 2] = b;
                        data[idx + 3] = 255;
                    }
                }
                
                this.ctx.putImageData(this.imageData, 0, 0);
                this.drawSources();
            }
            
            drawStatic() {
                // ç¹ªè£½éœæ…‹èƒŒæ™¯ï¼ˆæ™‚é–“ = 0ï¼‰
                const savedTime = this.time;
                this.time = 0;
                this.render();
                this.time = savedTime;
            }
            
            drawSources() {
                // ç¹ªè£½æ³¢æºæ¨™è¨˜
                this.sources.forEach((source, index) => {
                    // å¤–åœˆè„ˆè¡æ•ˆæœ
                    if (this.isRunning) {
                        const pulseRadius = 5 + (this.time * this.frequency * 20) % 15;
                        const pulseAlpha = 1 - (pulseRadius - 5) / 15;
                        
                        this.ctx.beginPath();
                        this.ctx.arc(source.x, source.y, pulseRadius, 0, Math.PI * 2);
                        this.ctx.strokeStyle = `rgba(255, 255, 100, ${pulseAlpha * 0.6})`;
                        this.ctx.lineWidth = 2;
                        this.ctx.stroke();
                    }
                    
                    // å…‰æšˆ
                    const gradient = this.ctx.createRadialGradient(
                        source.x, source.y, 0,
                        source.x, source.y, 15
                    );
                    gradient.addColorStop(0, 'rgba(0, 255, 0, 0.8)');
                    gradient.addColorStop(1, 'rgba(0, 255, 0, 0)');
                    this.ctx.fillStyle = gradient;
                    this.ctx.beginPath();
                    this.ctx.arc(source.x, source.y, 15, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // ä¸»é«”
                    this.ctx.beginPath();
                    this.ctx.arc(source.x, source.y, 8, 0, Math.PI * 2);
                    this.ctx.fillStyle = '#ffffff';
                    this.ctx.fill();
                    this.ctx.strokeStyle = '#00ff00';
                    this.ctx.lineWidth = 3;
                    this.ctx.stroke();
                    
                    // å…§æ ¸
                    this.ctx.beginPath();
                    this.ctx.arc(source.x, source.y, 4, 0, Math.PI * 2);
                    this.ctx.fillStyle = '#00ff00';
                    this.ctx.fill();
                    
                    // ç·¨è™Ÿ
                    this.ctx.fillStyle = '#ffffff';
                    this.ctx.font = 'bold 16px Arial';
                    this.ctx.textAlign = 'center';
                    this.ctx.textBaseline = 'top';
                    this.ctx.shadowColor = '#000';
                    this.ctx.shadowBlur = 4;
                    this.ctx.fillText((index + 1).toString(), source.x, source.y + 12);
                    this.ctx.shadowBlur = 0;
                });
            }
        }
        
        // åˆå§‹åŒ–
        let simulation;
        window.addEventListener('DOMContentLoaded', () => {
            simulation = new WaveInterferenceSimulation();
        });
    </script>
</body>
</html>
