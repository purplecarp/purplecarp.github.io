<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="utf-8">
    <title>æ°´æ³¢å¹²æ¶‰æ¨¡æ“¬ - ç‰©ç†æ¨¡æ“¬</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="../../images/fish.png" rel="shortcut icon">
    
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/normalize.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
    <link href="../../css/responsive.css" rel="stylesheet">
    <link href="../../css/simulations.css" rel="stylesheet">
    
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,300,500,700' rel='stylesheet' type='text/css'>
</head>
<body>
    <!--HEADER -->
    <div class="header">
      <div class="for-sticky">
        <!--LOGO-->
        <div class="col-md-2 col-xs-6 logo">
          <a href="../../index.html"><img alt="logo" class="logo-nav" src="../../images/fish.png"></a>
        </div>
        <!--/.LOGO END-->
      </div>
      <div class="menu-wrap">
        <nav class="menu">
          <div class="menu-list">
            <a href="../../index.html#home">
              <span>é¦–é </span>
            </a>
            <a href="../../index.html#about">
              <span>é—œæ–¼æˆ‘</span>
            </a>
            <a href="../../index.html#experience">
              <span>æ•™å­¸ç¶“é©—</span>
            </a>
            <a href="../../teaching-gallery.html">
              <span>æŸ¥çœ‹æ•™å­¸å‰ªå½±</span>
            </a>
            <a href="../../physics-simulations.html" class="active">
              <span>é«˜ä¸­ç‰©ç†å…§å®¹</span>
            </a>
            <a href="../../index.html#skills">
              <span>å°ˆæ¥­æŠ€èƒ½</span>
            </a>
            <a href="../../index.html#achievements">
              <span>æˆæœå±•ç¤º</span>
            </a>
            <a href="../../index.html#philosophy">
              <span>æ•™è‚²ç†å¿µ</span>
            </a>
            <a href="../../index.html#contact">
              <span>è¯çµ¡æ–¹å¼</span>
            </a>
          </div>
        </nav>
        <button class="close-button" id="close-button">Close Menu</button>
      </div>
      <button class="menu-button" id="open-button">
        <span></span>
        <span></span>
        <span></span>
      </button><!--/.for-sticky-->
    </div>
    <!--/.HEADER END-->
    
    <!-- é ‚éƒ¨å°èˆªæ¬„ -->
    <div class="top-nav">
        <div class="container">
            <a href="../../index.html" class="nav-brand">
                <img src="../../images/fish.png" alt="Logo">
                <h2>ç‰©é¯‰é­šæ•™å­¸æ¨¡æ“¬</h2>
            </a>
            <a href="../../physics-simulations.html" class="btn-back">â† è¿”å›åˆ—è¡¨</a>
        </div>
    </div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container">
        <!-- é é¢æ¨™é¡Œ -->
        <div class="page-header">
            <h1>ğŸŒŠ æ°´æ³¢å¹²æ¶‰æ¨¡æ“¬</h1>
            <p class="subtitle">é›™é»æ³¢æºçš„ç–ŠåŠ èˆ‡å¹²æ¶‰ç¾è±¡ | é¸ä¿®ç‰©ç† III - æ³¢å‹•</p>
        </div>
        
        <!-- ç‰©ç†åŸç†èªªæ˜ -->
        <div class="info-box">
            <h4>ğŸ“š ç‰©ç†åŸç†èˆ‡å…¬å¼</h4>
            <p>
                â€¢ <strong>å»ºè¨­æ€§å¹²æ¶‰ï¼š</strong>å…©æ³¢åŒç›¸ä½ç–ŠåŠ æ™‚ï¼ŒæŒ¯å¹…å¢å¼·ï¼Œå½¢æˆæ˜äº®å€åŸŸï¼ˆè…¹ç·šï¼‰<br>
                â€¢ <strong>ç ´å£æ€§å¹²æ¶‰ï¼š</strong>å…©æ³¢åç›¸ä½ç–ŠåŠ æ™‚ï¼ŒæŒ¯å¹…ç›¸æ¶ˆï¼Œå½¢æˆæš—æ·¡å€åŸŸï¼ˆç¯€ç·šï¼‰<br>
                â€¢ <strong>å¹²æ¶‰æ¢ç´‹ï¼š</strong>è§€å¯Ÿå¼·åº¦åˆ†å¸ƒï¼Œç‰¹å®šä½ç½®çš„åˆæˆæ³¢æŒ¯å¹…å§‹çµ‚ç‚ºé›¶ï¼Œè©²è™•å³ç‚ºç¯€é»ï¼ˆä½æ–¼ç¯€ç·šä¸Šï¼‰<br>
                â€¢ <strong>è…¹ç·šèˆ‡ç¯€ç·šæ•¸ç›®ï¼š</strong>æ³¢é•·èˆ‡é»æ³¢æºé–“è·ï¼ˆd/Î» æ¯”å€¼ï¼‰å…±åŒæ±ºå®šè…¹ç·šèˆ‡ç¯€ç·šæ•¸ç›®
            </p>
        </div>
        
        <!-- æ¨¡æ“¬å€åŸŸ -->
        <div class="simulation-section">
        <!-- æ¨¡æ“¬å€åŸŸ -->
        <div class="simulation-section">
            <div class="canvas-wrapper">
                <canvas id="intensityCanvas" width="900" height="150"></canvas>
                <canvas id="waveCanvas" width="900" height="600"></canvas>
            </div>
        </div>
        
        <!-- æ§åˆ¶æŒ‰éˆ• -->
        <div class="button-group">
            <button class="btn btn-start" id="startBtn">â–¶ é–‹å§‹æ¨¡æ“¬</button>
            <button class="btn btn-pause" id="pauseBtn">â¸ æš«åœ</button>
            <button class="btn btn-reset" id="resetBtn">ğŸ”„ é‡ç½®</button>
        </div>
        
        <div class="controls">
            <div class="control-section">
                <h3>ğŸ¯ æ³¢æºé…ç½®</h3>
                
                <div class="control-row">
                    <label>æ³¢æºé–“è· (d)</label>
                    <input type="range" id="spacingSlider" min="20" max="600" step="10" value="150">
                    <span class="value-display" id="spacingValue">150 px</span>
                </div>
                <div class="wave-info">
                    <div class="wave-info-item">
                        <div class="wave-info-label">æ³¢æº 1 ä½ç½®</div>
                        <div class="wave-info-value" id="source1Pos">-</div>
                    </div>
                    <div class="wave-info-item">
                        <div class="wave-info-label">æ³¢æº 2 ä½ç½®</div>
                        <div class="wave-info-value" id="source2Pos">-</div>
                    </div>
                    <div class="wave-info-item">
                        <div class="wave-info-label">æ³¢æºé–“è·</div>
                        <div class="wave-info-value" id="sourceDist">-</div>
                    </div>
                </div>
            </div>
            
            <div class="control-section">
                <h3>âš™ï¸ æ³¢å‹•åƒæ•¸</h3>
                
                <div class="control-row">
                    <label>æ³¢é•· (Î»)</label>
                    <input type="range" id="wavelengthSlider" min="10" max="100" step="5" value="30">
                    <span class="value-display" id="wavelengthValue">30 px</span>
                </div>
                
                <div class="control-row">
                    <label>åˆ‡é¢ä½ç½® (y)</label>
                    <input type="range" id="slicePositionSlider" min="50" max="550" step="10" value="300">
                    <span class="value-display" id="slicePositionValue">300 px</span>
                </div>
                
                <div class="control-row">
                    <label>å‹•ç•«é€Ÿåº¦</label>
                    <input type="range" id="speedSlider" min="0.2" max="3" step="0.2" value="1">
                    <span class="value-display" id="speedValue">1.0x</span>
                </div>
                
                <div class="wave-info" style="margin-top: 20px;">
                    <div class="wave-info-item">
                        <div class="wave-info-label">æ³¢é•· (Î»)</div>
                        <div class="wave-info-value" id="currentWavelength">30 px</div>
                    </div>
                    <div class="wave-info-item">
                        <div class="wave-info-label">åˆ‡é¢ä½ç½®</div>
                        <div class="wave-info-value" id="currentSlicePosition">300 px</div>
                    </div>
                    <div class="wave-info-item">
                        <div class="wave-info-label">è·é›¢æ³¢æº</div>
                        <div class="wave-info-value" id="distanceToSource">250 px</div>
                    </div>
                    <div class="wave-info-item">
                        <div class="wave-info-label">d/Î» æ¯”å€¼</div>
                        <div class="wave-info-value" id="spacingRatio">5.0</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ•™å­¸æŒ‡å¼• -->
        <div class="info-box teaching-note">
            <h4>ğŸ’¡ æ•™å­¸ä½¿ç”¨æŒ‡å¼•</h4>
            <p>
                â€¢ <strong>æ³¢æºä½ç½®ï¼š</strong>å…©å€‹æ³¢æºä½æ–¼æ¨¡æ“¬å€åº•éƒ¨ï¼Œå‘ä¸Šå‚³æ’­ç”¢ç”Ÿå¹²æ¶‰åœ–æ¡ˆ<br>
                â€¢ <strong>èª¿æ•´æ³¢é•·ï¼š</strong>æ³¢é•·è¶ŠçŸ­ï¼Œå¹²æ¶‰æ¢ç´‹è¶Šå¯†é›†ï¼›å¯è§€å¯Ÿæ³¢é•·å°åœ–æ¡ˆçš„å½±éŸ¿<br>
                â€¢ <strong>èª¿æ•´é–“è·ï¼š</strong>æ”¹è®Šå…©æ³¢æºé–“è·é›¢ï¼Œè§€å¯Ÿå¹²æ¶‰æ¢ç´‹æ•¸é‡èˆ‡åˆ†å¸ƒçš„è®ŠåŒ–<br>
                â€¢ <strong>åˆ‡é¢åˆ†æï¼š</strong>ç´…è‰²è™›ç·šä»£è¡¨è§€å¯Ÿåˆ‡é¢ï¼Œå¯ä¸Šä¸‹ç§»å‹•æŸ¥çœ‹ä¸åŒä½ç½®çš„æ³¢å¼·åº¦<br>
                â€¢ <strong>å¼·åº¦åœ–è¡¨ï¼š</strong>ä¸Šæ–¹ç¶ è‰²æ›²ç·šé¡¯ç¤ºåˆ‡é¢ä¸Šçš„çµ•å°æŒ¯å¹…å¼·åº¦åˆ†å¸ƒ<br>
                â€¢ <strong>d/Î» æ¯”å€¼ï¼š</strong>æ­¤æ¯”å€¼è¶Šå¤§ï¼Œå¹²æ¶‰æ¢ç´‹æ•¸é‡è¶Šå¤š<br>
                â€¢ <strong>é¡è‰²ç·¨ç¢¼ï¼š</strong>
                <span style="color: #e74c3c; font-weight: bold;">ç´…é»ƒ</span> = æ³¢å³°ï¼ˆæ­£æŒ¯å¹…ï¼‰ï¼Œ
                <span style="color: #3498db; font-weight: bold;">è—</span> = æ³¢è°·ï¼ˆè² æŒ¯å¹…ï¼‰ï¼Œ
                <span style="color: #2c3e50; font-weight: bold;">é»‘</span> = é›¶æŒ¯å¹…ï¼ˆç¯€ç·šï¼‰
            </p>
        </div>
    </div>
    
    <script>
        class WaveInterferenceSimulation {
            constructor() {
                this.canvas = document.getElementById('waveCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.width = this.canvas.width;
                this.height = this.canvas.height;
                
                // å¼·åº¦åœ–canvas
                this.intensityCanvas = document.getElementById('intensityCanvas');
                this.intensityCtx = this.intensityCanvas.getContext('2d');
                this.intensityWidth = this.intensityCanvas.width;
                this.intensityHeight = this.intensityCanvas.height;
                
                // ç‰©ç†åƒæ•¸
                this.wavelength = 30;    // æ³¢é•·ï¼ˆåƒç´ ï¼‰
                this.frequency = 1.5;    // é »ç‡ï¼ˆHzï¼‰- å›ºå®šå€¼
                this.amplitude = 50;     // æŒ¯å¹… - å›ºå®šå€¼
                this.speed = 1.0;        // å‹•ç•«é€Ÿåº¦å€ç‡
                this.spacingDistance = 150; // æ³¢æºé–“è·ï¼ˆåƒç´ ï¼‰
                this.slicePosition = 300;   // åˆ‡é¢ä½ç½®ï¼ˆyåº§æ¨™ï¼‰
                
                // æ³¢æºé…ç½®
                this.sources = [];
                
                // æ™‚é–“
                this.time = 0;
                this.isRunning = false;
                this.animationId = null;
                
                // åƒç´ ç·©è¡
                this.imageData = this.ctx.createImageData(this.width, this.height);
                
                // æ³¢å‰è¿½è¹¤ï¼ˆç”¨æ–¼é¡¯ç¤ºæ³¢çš„æ“´æ•£ç¯„åœï¼‰
                this.showWavefront = true;
                
                this.init();
            }
            
            init() {
                this.setupSources();
                this.setupControls();
                this.updateInfo();
                this.drawStatic();
            }
            
            setupSources() {
                const centerX = this.width / 2;
                const bottomY = this.height - 50;  // è·é›¢åº•éƒ¨ 50 åƒç´ 
                const halfDist = this.spacingDistance / 2;
                
                this.sources = [
                    { x: centerX - halfDist, y: bottomY, phase: 0 },
                    { x: centerX + halfDist, y: bottomY, phase: 0 }
                ];
                
                this.updateSourceInfo();
            }
            
            setupControls() {
                // æ³¢æºé–“è·æ»‘æ¡¿
                document.getElementById('spacingSlider').addEventListener('input', (e) => {
                    this.spacingDistance = parseFloat(e.target.value);
                    document.getElementById('spacingValue').textContent = this.spacingDistance + ' px';
                    this.setupSources();
                    this.updateInfo();
                    if (!this.isRunning) {
                        this.drawStatic();
                    }
                });
                
                // æ³¢é•·æ§åˆ¶
                document.getElementById('wavelengthSlider').addEventListener('input', (e) => {
                    this.wavelength = parseFloat(e.target.value);
                    document.getElementById('wavelengthValue').textContent = this.wavelength + ' px';
                    this.updateInfo();
                });
                
                // åˆ‡é¢ä½ç½®æ§åˆ¶
                document.getElementById('slicePositionSlider').addEventListener('input', (e) => {
                    this.slicePosition = parseFloat(e.target.value);
                    document.getElementById('slicePositionValue').textContent = this.slicePosition.toFixed(0) + ' px';
                    this.updateInfo();
                });
                
                // é€Ÿåº¦æ§åˆ¶
                document.getElementById('speedSlider').addEventListener('input', (e) => {
                    this.speed = parseFloat(e.target.value);
                    document.getElementById('speedValue').textContent = this.speed.toFixed(1) + 'x';
                });
                
                // æŒ‰éˆ•æ§åˆ¶
                document.getElementById('startBtn').addEventListener('click', () => this.start());
                document.getElementById('pauseBtn').addEventListener('click', () => this.pause());
                document.getElementById('resetBtn').addEventListener('click', () => this.reset());
            }
            
            updateSourceInfo() {
                const s1 = this.sources[0];
                const s2 = this.sources[1];
                const dist = Math.sqrt((s2.x - s1.x) ** 2 + (s2.y - s1.y) ** 2);
                
                document.getElementById('source1Pos').textContent = `(${s1.x}, ${s1.y})`;
                document.getElementById('source2Pos').textContent = `(${s2.x}, ${s2.y})`;
                document.getElementById('sourceDist').textContent = dist.toFixed(0) + ' px';
            }
            
            updateInfo() {
                document.getElementById('currentWavelength').textContent = this.wavelength.toFixed(0) + ' px';
                document.getElementById('currentSlicePosition').textContent = this.slicePosition.toFixed(0) + ' px';
                
                // è¨ˆç®—åˆ‡é¢åˆ°æ³¢æºçš„è·é›¢
                const sourceY = this.sources[0].y;
                const distanceToSource = Math.abs(sourceY - this.slicePosition);
                document.getElementById('distanceToSource').textContent = distanceToSource.toFixed(0) + ' px';
                
                const ratio = this.spacingDistance / this.wavelength;
                document.getElementById('spacingRatio').textContent = ratio.toFixed(1);
            }
            
            start() {
                this.isRunning = true;
                this.animate();
            }
            
            pause() {
                this.isRunning = false;
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                    this.animationId = null;
                }
            }
            
            reset() {
                this.pause();
                this.time = 0;
                this.drawStatic();
            }
            
            animate() {
                if (!this.isRunning) return;
                
                // æ›´æ–°æ™‚é–“ï¼ˆè€ƒæ…®é€Ÿåº¦å€ç‡ï¼‰
                this.time += 0.016 * this.speed;  // å‡è¨­ 60 FPS
                
                this.render();
                this.animationId = requestAnimationFrame(() => this.animate());
            }
            
            calculateWaveHeight(x, y) {
                let totalHeight = 0;
                const omega = 2 * Math.PI * this.frequency;
                const k = 2 * Math.PI / this.wavelength;
                
                // è¨ˆç®—æ³¢é€Ÿï¼ˆv = fÂ·Î»ï¼‰
                const waveSpeed = this.frequency * this.wavelength;
                
                // ç–ŠåŠ æ‰€æœ‰æ³¢æºçš„è²¢ç»
                for (const source of this.sources) {
                    const dx = x - source.x;
                    const dy = y - source.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    // æ³¢å‰æ“´æ•£æª¢æŸ¥ï¼ˆæ³¢åªåœ¨å·²åˆ°é”çš„å€åŸŸé¡¯ç¤ºï¼‰
                    const wavefrontDistance = waveSpeed * this.time;
                    if (this.showWavefront && distance > wavefrontDistance) {
                        continue;  // æ³¢å°šæœªåˆ°é”æ­¤ä½ç½®
                    }
                    
                    // æ³¢å‹•æ–¹ç¨‹ï¼šh = A Â· sin(kÂ·r - Ï‰Â·t + Ï†)
                    // k = 2Ï€/Î», Ï‰ = 2Ï€f
                    const phase = k * distance - omega * this.time + source.phase;
                    const height = this.amplitude * Math.sin(phase);
                    
                    // è€ƒæ…®è·é›¢è¡°æ¸›ï¼ˆå¯é¸ï¼Œè®“é è™•çš„æ³¢è®Šå¼±ï¼‰
                    const attenuation = 1.0 / (1.0 + distance / 1000);
                    
                    totalHeight += height * attenuation;
                }
                
                return totalHeight;
            }
            
            render() {
                const data = this.imageData.data;
                const maxDisplay = this.amplitude * this.sources.length * 0.8;
                
                // è¨ˆç®—æ¯å€‹åƒç´ çš„æ³¢é«˜
                for (let y = 0; y < this.height; y++) {
                    for (let x = 0; x < this.width; x++) {
                        const height = this.calculateWaveHeight(x, y);
                        const normalized = Math.max(-1, Math.min(1, height / maxDisplay));
                        
                        const idx = (y * this.width + x) * 4;
                        
                        // æ”¹é€²çš„é¡è‰²æ˜ å°„
                        let r, g, b;
                        
                        if (normalized > 0) {
                            // æ­£æŒ¯å¹…ï¼šé»‘ -> ç´… -> é»ƒ -> ç™½
                            const intensity = normalized;
                            if (intensity < 0.5) {
                                // é»‘ -> ç´…
                                r = Math.floor(255 * intensity * 2);
                                g = 0;
                                b = 0;
                            } else {
                                // ç´… -> é»ƒ
                                r = 255;
                                g = Math.floor(255 * (intensity - 0.5) * 2);
                                b = 0;
                            }
                        } else {
                            // è² æŒ¯å¹…ï¼šé»‘ -> è— -> é’
                            const intensity = -normalized;
                            if (intensity < 0.5) {
                                // é»‘ -> è—
                                r = 0;
                                g = 0;
                                b = Math.floor(255 * intensity * 2);
                            } else {
                                // è— -> é’
                                r = 0;
                                g = Math.floor(255 * (intensity - 0.5) * 2);
                                b = 255;
                            }
                        }
                        
                        data[idx] = r;
                        data[idx + 1] = g;
                        data[idx + 2] = b;
                        data[idx + 3] = 255;
                    }
                }
                
                this.ctx.putImageData(this.imageData, 0, 0);
                this.drawSliceLine();
                this.drawSources();
                this.drawIntensityGraph();
            }
            
            drawStatic() {
                // ç¹ªè£½éœæ…‹èƒŒæ™¯ï¼ˆæ™‚é–“ = 0ï¼‰
                const savedTime = this.time;
                this.time = 0;
                this.render();
                this.time = savedTime;
            }
            
            drawSliceLine() {
                // ç¹ªè£½åˆ‡é¢ç·š
                this.ctx.strokeStyle = '#ff6b6b';
                this.ctx.lineWidth = 3;
                this.ctx.setLineDash([10, 5]);
                this.ctx.beginPath();
                this.ctx.moveTo(0, this.slicePosition);
                this.ctx.lineTo(this.width, this.slicePosition);
                this.ctx.stroke();
                this.ctx.setLineDash([]);
                
                // æ¨™ç±¤
                this.ctx.fillStyle = '#ff6b6b';
                this.ctx.font = 'bold 14px Arial';
                this.ctx.textAlign = 'right';
                this.ctx.shadowColor = '#000';
                this.ctx.shadowBlur = 3;
                this.ctx.fillText(`åˆ‡é¢ y=${this.slicePosition.toFixed(0)}`, this.width - 10, this.slicePosition - 10);
                this.ctx.shadowBlur = 0;
            }
            
            drawIntensityGraph() {
                // æ¸…é™¤å¼·åº¦åœ–canvas
                this.intensityCtx.fillStyle = '#1a1a1a';
                this.intensityCtx.fillRect(0, 0, this.intensityWidth, this.intensityHeight);
                
                // ç¹ªè£½ç¶²æ ¼
                this.intensityCtx.strokeStyle = '#333';
                this.intensityCtx.lineWidth = 1;
                for (let i = 0; i <= 5; i++) {
                    const y = (this.intensityHeight / 5) * i;
                    this.intensityCtx.beginPath();
                    this.intensityCtx.moveTo(0, y);
                    this.intensityCtx.lineTo(this.intensityWidth, y);
                    this.intensityCtx.stroke();
                }
                
                // è¨ˆç®—åˆ‡é¢ä¸Šæ¯å€‹é»çš„å¼·åº¦
                const intensities = [];
                let maxIntensity = 0;
                
                for (let x = 0; x < this.width; x++) {
                    const height = this.calculateWaveHeight(x, this.slicePosition);
                    const intensity = Math.abs(height);
                    intensities.push(intensity);
                    maxIntensity = Math.max(maxIntensity, intensity);
                }
                
                // æ­¸ä¸€åŒ–ä¸¦ç¹ªè£½æŠ˜ç·šåœ–
                this.intensityCtx.beginPath();
                this.intensityCtx.strokeStyle = '#00ff88';
                this.intensityCtx.lineWidth = 2;
                
                for (let x = 0; x < this.width; x++) {
                    const normalizedIntensity = maxIntensity > 0 ? intensities[x] / maxIntensity : 0;
                    const graphX = (x / this.width) * this.intensityWidth;
                    const graphY = this.intensityHeight - (normalizedIntensity * this.intensityHeight * 0.9);
                    
                    if (x === 0) {
                        this.intensityCtx.moveTo(graphX, graphY);
                    } else {
                        this.intensityCtx.lineTo(graphX, graphY);
                    }
                }
                this.intensityCtx.stroke();
                
                // å¡«å……å€åŸŸ
                this.intensityCtx.lineTo(this.intensityWidth, this.intensityHeight);
                this.intensityCtx.lineTo(0, this.intensityHeight);
                this.intensityCtx.closePath();
                this.intensityCtx.fillStyle = 'rgba(0, 255, 136, 0.2)';
                this.intensityCtx.fill();
                
                // ç¹ªè£½æ¨™ç±¤
                this.intensityCtx.fillStyle = '#fff';
                this.intensityCtx.font = 'bold 12px Arial';
                this.intensityCtx.textAlign = 'left';
                this.intensityCtx.fillText('å¼·åº¦åˆ†å¸ƒ', 10, 20);
                this.intensityCtx.textAlign = 'right';
                this.intensityCtx.fillText(`Max: ${maxIntensity.toFixed(1)}`, this.intensityWidth - 10, 20);
            }
            
            drawSources() {
                // ç¹ªè£½æ³¢æºæ¨™è¨˜
                this.sources.forEach((source, index) => {
                    // å¤–åœˆè„ˆè¡æ•ˆæœ
                    if (this.isRunning) {
                        const pulseRadius = 5 + (this.time * this.frequency * 20) % 15;
                        const pulseAlpha = 1 - (pulseRadius - 5) / 15;
                        
                        this.ctx.beginPath();
                        this.ctx.arc(source.x, source.y, pulseRadius, 0, Math.PI * 2);
                        this.ctx.strokeStyle = `rgba(255, 255, 100, ${pulseAlpha * 0.6})`;
                        this.ctx.lineWidth = 2;
                        this.ctx.stroke();
                    }
                    
                    // å…‰æšˆ
                    const gradient = this.ctx.createRadialGradient(
                        source.x, source.y, 0,
                        source.x, source.y, 15
                    );
                    gradient.addColorStop(0, 'rgba(0, 255, 0, 0.8)');
                    gradient.addColorStop(1, 'rgba(0, 255, 0, 0)');
                    this.ctx.fillStyle = gradient;
                    this.ctx.beginPath();
                    this.ctx.arc(source.x, source.y, 15, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // ä¸»é«”
                    this.ctx.beginPath();
                    this.ctx.arc(source.x, source.y, 8, 0, Math.PI * 2);
                    this.ctx.fillStyle = '#ffffff';
                    this.ctx.fill();
                    this.ctx.strokeStyle = '#00ff00';
                    this.ctx.lineWidth = 3;
                    this.ctx.stroke();
                    
                    // å…§æ ¸
                    this.ctx.beginPath();
                    this.ctx.arc(source.x, source.y, 4, 0, Math.PI * 2);
                    this.ctx.fillStyle = '#00ff00';
                    this.ctx.fill();
                    
                    // ç·¨è™Ÿ
                    this.ctx.fillStyle = '#ffffff';
                    this.ctx.font = 'bold 16px Arial';
                    this.ctx.textAlign = 'center';
                    this.ctx.textBaseline = 'top';
                    this.ctx.shadowColor = '#000';
                    this.ctx.shadowBlur = 4;
                    this.ctx.fillText((index + 1).toString(), source.x, source.y + 12);
                    this.ctx.shadowBlur = 0;
                });
            }
        }
        
        // åˆå§‹åŒ–
        let simulation;
        window.addEventListener('DOMContentLoaded', () => {
            simulation = new WaveInterferenceSimulation();
        });
    </script>
    
    <script src="../../js/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="../../js/classie.js" type="text/javascript"></script>
    <script src="../../js/main.js" type="text/javascript"></script>
</body>
</html>
